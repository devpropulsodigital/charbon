{{ 'section-rich-text.css' | asset_url | stylesheet_tag }}

  {%- liquid 
     
  assign border_radius = section.settings.border_radius
  assign section_width = section.settings.section_width
  assign padding_top = section.settings.padding_top
  assign padding_bottom = section.settings.padding_bottom
  assign padding_desktop = section.settings.padding_desktop
  assign padding_vertical_desktop = section.settings.padding_vertical_desktop
  assign padding_mobile = section.settings.padding_mobile
  assign padding_vertical_mobile = section.settings.padding_vertical_mobile
  
  assign rich_text_background_color = section.settings.rich_text_background_color
  assign content_width = section.settings.content_width
  
  assign margin_top_desktop = section.settings.margin_top_desktop
  assign margin_bottom_desktop = section.settings.margin_bottom_desktop
  assign margin_top_mobile = section.settings.margin_top_mobile
  assign margin_bottom_mobile = section.settings.margin_bottom_mobile
  
  assign enable_shadow = section.settings.enable_shadow
  assign shadow_horizontal_offset = section.settings.shadow_horizontal_offset
  assign shadow_vertical_offset = section.settings.shadow_vertical_offset
  assign shadow_blur_radius = section.settings.shadow_blur_radius
  assign shadow_spread_radius = section.settings.shadow_spread_radius
  assign shadow_color_red = section.settings.shadow_color | color_extract: 'red'
  assign shadow_color_green = section.settings.shadow_color | color_extract: 'green'
  assign shadow_color_blue = section.settings.shadow_color | color_extract: 'blue'
  assign shadow_opacity = section.settings.shadow_opacity
 
-%}  
{%- style -%}

  {% for block in section.blocks %}
  {{  block.settings.description_font | font_face: font_display: 'swap' }} 
  {{  block.settings.heading_font | font_face: font_display: 'swap' }}
  {{  block.settings.button_font | font_face: font_display: 'swap' }}
  {% endfor %}
  
.section-{{ section.id }} .rich-text__wrapper {
  border-radius: {{ border_radius }}px;
}  

.section-{{ section.id }} .rich-text {
  width: {{ section_width }}%;
}

@media screen and (max-width: 750px) {
    .section-{{ section.id }} .rich-text {
  width: 100%;
  }
}
  
.section-{{ section.id }}.fit-content .rich-text {
  max-width: fit-content;
}

.section-position--left {
  margin-left: 0;
  margin-right: auto;
  display: block;
}

.section-position--center {
  margin-left: auto;
  margin-right: auto;
  display: block;
}

.section-position--right {
  margin-left: auto;
  margin-right: 0;
  display: block;
}

.section-{{ section.id }}-padding {
  padding-top: {{ padding_top }}px;
  padding-bottom: {{ padding_bottom }}px;
}

@media screen and (max-width: 750px) {
  .section-{{ section.id }} {
    max-width: 100%;
  }
}

.rich-text__wrapper--{{ section.id }} {
  padding-left: {{ padding_desktop }}px;
  padding-right: {{ padding_desktop }}px;
  padding-top: {{ padding_vertical_desktop }}px;
  padding-bottom: {{ padding_vertical_desktop }}px;
}

@media only screen and (max-width: 750px) {
  .rich-text__wrapper--{{ section.id }} {
    padding-left: {{ padding_mobile }}px;
    padding-right: {{ padding_mobile }}px;
    padding-top: {{ padding_vertical_mobile }}px;
    padding-bottom: {{ padding_vertical_mobile }}px;
  }
}

{% for block in section.blocks %}
.rich-text__text--{{ block.id }} {
  color: {{ block.settings.description_color }};
  font-size: {{ block.settings.description_size_desktop }}rem;
}
  
{% if block.settings.font_description_custom %}
  .rich-text__text--{{ block.id }} {
     font-family: {{ block.settings.description_font.family }}; {{ block.settings.description_font.fallback_families }};
     font-weight: {{ block.settings.description_font.weight }};
     font-style: {{ block.settings.description_font.style }};
  }
{% endif %} 
  
@media only screen and (max-width: 750px) {
.rich-text__text--{{ block.id }} {
    font-size: {{ block.settings.description_size_mobile }}rem;
  }
}
{% endfor %}
  
.heading-alignment--left {
  text-align: left;
}

.heading-alignment--center {
  text-align: center;
}

.heading-alignment--right {
  text-align: right;
}

{% for block in section.blocks %}
.heading--{{ block.id }} {
  font-size: {{ block.settings.heading_size_desktop }}rem;
  color: {{ block.settings.heading_color }};
  margin-bottom: {{ block.settings.heading_margin_bottom_desktop }}px;
}

{% if block.settings.font_heading_custom %}
  .heading--{{ block.id }} {
     font-family: {{ block.settings.heading_font.family }}; {{ block.settings.heading_font.fallback_families }};
     font-weight: {{ block.settings.heading_font.weight }};
     font-style: {{ block.settings.heading_font.style }};
  }
{% endif %}  
{% endfor %}

  @media only screen and (max-width: 750px) {
  {% for block in section.blocks %}
  .heading--{{ block.id }} {
    margin-bottom: {{ block.settings.heading_margin_bottom_mobile }}px;
    font-size: {{ block.settings.heading_size_mobile }}rem;
  }
  {% endfor %}
}
 
.description-alignment--left {
  text-align: left;
}

.description-alignment--center {
  text-align: center;
}

.description-alignment--right {
  text-align: right;
}
  
.section-{{ section.id }} .rich-text__wrapper {
  background-color: {{ rich_text_background_color }};
}

.rich-text__blocks-{{ section.id }} {
  width: {{ content_width }}px;
}
  
  .isolate.section-{{ section.id }} {
  margin-top: {{ margin_top_desktop }}px;
  margin-bottom: {{ margin_bottom_desktop }}px;
}

@media only screen and (max-width: 750px) {
  .isolate.section-{{ section.id }} {
    margin-top: {{ margin_top_mobile }}px;
    margin-bottom: {{ margin_bottom_mobile }}px;
  }
}

.section-{{ section.id }} .rich-text__wrapper {
    box-shadow: 
    {% if enable_shadow %}
        {{ shadow_horizontal_offset }}px 
        {{ shadow_vertical_offset }}px 
        {{ shadow_blur_radius }}px 
        {{ shadow_spread_radius }}px 
        rgba(
          {{ shadow_color_red }},
          {{ shadow_color_green }},
          {{ shadow_color_blue }},
          {{ shadow_opacity }});
    {% else %}
        none;
    {% endif %};
  }

  {% for block in section.blocks %}
  .rich-text__buttons .button {
  font-size: {{ block.settings.button_text_size_desktop }}rem;
  color: {{ block.settings.button_text_color }};
  background-color: {{ block.settings.button_background_color }};
  }

  {% if block.settings.font_button_custom %}
    .rich-text__buttons .button {
       font-family: {{ block.settings.button_font.family }}; {{ block.settings.button_font.fallback_families }};
       font-style: {{ block.settings.button_font.style }};
       font-weight: {{ block.settings.button_font.weight }};
    }
  {% endif %}
    
  @media only screen and (max-width: 750px) {
   .rich-text__buttons .button {
      font-size: {{ block.settings.button_text_size_mobile }}rem;
    }
  }
    {% endfor %}
  
  {%- endstyle -%}

<div class="isolate section-{{ section.id }}{% unless section.settings.full_width %} page-width{% endunless %} content-for-grouping {% if section.settings.mobile-hidden %} mobile-hidden {% endif %} {% if section.settings.tablet-hidden %} tablet-hidden {% endif %} {% if section.settings.laptop-hidden %} laptop-hidden {% endif %} {% if section.settings.desktop-hidden %} desktop-hidden {% endif %}">
  {% if section.settings.display_id %}
    <copy-button class='section-id-btn button' data-content="#shopify-section-{{ section.id }}" data-success="false">
      <span class="copy-text">Cliquez pour copier l'ID de la section</span>
      <span class="copy-success">ID de la section copié !</span>
    </copy-button>
  {% endif %}
  <div class="rich-text content-container section-{{ section.id }} gradient section-position--{{ section.settings.desktop_content_position }}{% if section.settings.full_width %} rich-text--full-width content-container--full-width{% endif %} "
  style="max-width: {% if section.settings.fit_content %}fit-content{% else %}{{ section.settings.section_width }}%{% endif %};">
  <div class="rich-text__wrapper rich-text__wrapper--{{ section.id }} {% if section.settings.full_width %} page-width{% endif %}"
    style="background-color: {{ section.settings.rich_text_background_color | default: '#ffffff' }};">
      <div class="rich-text__blocks-{{ section.id }} {{ section.settings.content_alignment }}">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when 'heading' -%}
             <h2 class="rich-text__heading rte inline-richtext heading-alignment--{{ block.settings.heading_alignment }} heading--{{ block.id }}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
                {{ block.shopify_attributes }}
                {% if settings.animations_reveal_on_scroll %}
                  data-cascade
                  style="--animation-order: {{ forloop.index }};"
                {% endif %}
              >
                {{ block.settings.heading }}
            </h2>
            {%- when 'caption' -%}
              <p class="rich-text__caption {{ block.settings.text_style }} {{ block.settings.text_style }}--{{ block.settings.text_size }}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
                {{ block.shopify_attributes }}
                {% if settings.animations_reveal_on_scroll %}
                  data-cascade
                  style="--animation-order: {{ forloop.index }};"
                {% endif %}
              >
                {{ block.settings.caption | escape }}
              </p>
            {%- when 'text' -%}
              <div class="rich-text__text rich-text__text--{{ block.id }} rte description-alignment--{{ block.settings.description_alignment }}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %}"
                {{ block.shopify_attributes }}
                {% if settings.animations_reveal_on_scroll %}
                  data-cascade
                  style="--animation-order: {{ forloop.index }};"
                {% endif %}
              >
                {{ block.settings.text }}
              </div>
            {%- when 'button' -%}
              <div class="rich-text__buttons rich-text__buttons-alignment--{{ block.settings.buttons_alignment }}{% if block.settings.button_label != blank %} rich-text__buttons--single{% endif %}{% if settings.animations_reveal_on_scroll %} scroll-trigger animate--slide-in{% endif %} section-{{ section.id }}"
               {{ block.shopify_attributes }}
               {% if settings.animations_reveal_on_scroll %}
                 data-cascade
                 style="--animation-order: {{ forloop.index }};"
               {% endif %}
          >
            {%- if block.settings.button_label != blank -%}
              <a
                {% if block.settings.button_link == blank %}
                  role="link" aria-disabled="true"
                {% else %}
                  href="{{ block.settings.button_link }}"
                {% endif %}
                class="button"
              >
                {{ block.settings.button_label | escape }}
              </a>
            {%- endif -%}
          </div>
          {%- endcase -%}
        {%- endfor -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.rich-text.name",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "header",
      "content": "ID de la section"
    },
    {
      "type": "checkbox",
      "id": "display_id",
      "label": "Afficher le bouton pour copier l'ID de la section",
      "info": "L'ID peut être utilisé dans la section 'Double section' pour afficher 2 sections sur la même ligne ou dans la section 'Onglets' pour afficher la section dans des onglets. L'ID peut également être utilisé dans un lien de bouton pour faire défiler la page jusqu'à cette section.",
      "default": false
    },
    {
      "type": "header",
      "content": "Masquer la section selon le type d'appareil"
    },
    {
      "type": "checkbox",
      "id": "mobile-hidden",
      "label": "Masquer sur mobile",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "tablet-hidden",
      "label": "Masquer sur tablette",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "laptop-hidden",
      "label": "Masquer sur ordinateur portable",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "desktop-hidden",
      "label": "Masquer sur ordinateur",
      "default": false
    },
    {
      "type": "header",
      "content": "Paramètres de la section"
    },
    {
      "type": "range",
      "id": "section_width",
      "label": "Largeur de la section sur ordinateur",
      "default": 100,
      "min": 30,
      "max": 100,
      "unit": "%"
    },
    {
      "type": "range",
      "id": "content_width",
      "label": "Largeur du contenu",
      "default": 1200,
      "min": 400,
      "max": 2400,
      "unit": "px",
      "step": 20
    },
    {
      "type": "checkbox",
      "id": "fit_content",
      "label": "Ajuster la largeur de la section en fonction du contenu",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": true,
      "label": "t:sections.rich-text.settings.full_width.label"
    },
    {
      "type": "select",
      "id": "desktop_content_position",
      "label": "Position du texte enrichi sur ordinateur",
      "default": "center",
      "options": [
        {
          "value": "left",
          "label": "Gauche"
        },
        {
          "value": "center",
          "label": "Centre"
        },
        {
          "value": "right",
          "label": "Droite"
        }
      ]
    },
    {
      "type": "color",
      "id": "rich_text_background_color",
      "label": "Couleur de fond du texte enrichi",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Rayon de la bordure",
      "default": 0,
      "min": 0,
      "max": 50,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "Ombre"
    },
    {
      "type": "checkbox",
      "id": "enable_shadow",
      "label": "Activer l'ombre",
      "default": false
    },
    {
      "type": "color",
      "id": "shadow_color",
      "label": "Couleur de l'ombre",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "shadow_opacity",
      "label": "Opacité de l'ombre",
      "default": 0.5,
      "min": 0,
      "max": 1,
      "step": 0.1
    },
    {
      "type": "range",
      "id": "shadow_horizontal_offset",
      "label": "Décalage horizontal de l'ombre",
      "default": 0,
      "min": -50,
      "max": 50,
      "unit": "px",
      "step": 1
    },
    {
      "type": "range",
      "id": "shadow_vertical_offset",
      "label": "Décalage vertical de l'ombre",
      "default": 10,
      "min": -50,
      "max": 50,
      "unit": "px",
      "step": 1
    },
    {
      "type": "range",
      "id": "shadow_blur_radius",
      "label": "Rayon de flou de l'ombre",
      "default": 20,
      "min": 0,
      "max": 100,
      "unit": "px",
      "step": 1
    },
    {
      "type": "range",
      "id": "shadow_spread_radius",
      "label": "Étendue de l'ombre",
      "default": 0,
      "min": -50,
      "max": 50,
      "unit": "px",
      "step": 1
    },
    {
      "type": "header",
      "content": "Marge intérieure"
    },
    {
      "type": "range",
      "id": "padding_desktop",
      "label": "Marge latérale sur ordinateur",
      "default": 20,
      "min": 0,
      "max": 100,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_mobile",
      "label": "Marge latérale sur mobile",
      "default": 10,
      "min": 0,
      "max": 50,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_vertical_desktop",
      "label": "Marge verticale sur ordinateur",
      "default": 40,
      "min": 0,
      "max": 100,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "padding_vertical_mobile",
      "label": "Marge verticale sur mobile",
      "default": 20,
      "min": 0,
      "max": 100,
      "unit": "px"
    },
    {
      "type": "header",
      "content": "Marge extérieure"
    },
    {
      "type": "range",
      "id": "margin_top_desktop",
      "label": "Marge supérieure sur ordinateur",
      "default": 20,
      "min": 0,
      "max": 100,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "margin_bottom_desktop",
      "label": "Marge inférieure sur ordinateur",
      "default": 20,
      "min": 0,
      "max": 100,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "margin_top_mobile",
      "label": "Marge supérieure sur mobile",
      "default": 10,
      "min": 0,
      "max": 50,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "margin_bottom_mobile",
      "label": "Marge inférieure sur mobile",
      "default": 10,
      "min": 0,
      "max": 50,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "t:sections.rich-text.blocks.heading.name",
      "limit": 3,
      "settings": [
        {
          "type": "inline_richtext",
          "id": "heading",
          "default": "t:sections.rich-text.blocks.heading.settings.heading.default",
          "label": "t:sections.rich-text.blocks.heading.settings.heading.label"
        },
        {
          "type": "checkbox",
          "id": "font_heading_custom",
          "label": "Appliquer une police différente du thème",
          "default": false
        },
        {
          "type": "font_picker",
          "id": "heading_font",
          "label": "Police du titre",
          "default": "poppins_n9"
        },
        {
          "type": "range",
          "id": "heading_size_desktop",
          "label": "Taille du titre sur ordinateur",
          "default": 3,
          "min": 1,
          "max": 5,
          "step": 0.1,
          "unit": "rem"
        },
        {
          "type": "range",
          "id": "heading_size_mobile",
          "label": "Taille du titre sur mobile",
          "default": 2.5,
          "min": 1,
          "max": 5,
          "step": 0.1,
          "unit": "rem"
        },
        {
          "type": "color",
          "id": "heading_color",
          "label": "Couleur du titre",
          "default": "#000000"
        },
        {
          "type": "select",
          "id": "heading_alignment",
          "label": "Alignement du titre",
          "default": "center",
          "options": [
            {
              "value": "left",
              "label": "Gauche"
            },
            {
              "value": "center",
              "label": "Centre"
            },
            {
              "value": "right",
              "label": "Droite"
            }
          ]
        },
        {
          "type": "range",
          "id": "heading_margin_bottom_desktop",
          "label": "Marge inférieure sur ordinateur",
          "default": 20,
          "min": 0,
          "max": 100,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "heading_margin_bottom_mobile",
          "label": "Marge inférieure sur mobile",
          "default": 15,
          "min": 0,
          "max": 100,
          "unit": "px"
        }
      ]
    },
    {
      "type": "caption",
      "name": "t:sections.rich-text.blocks.caption.name",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "caption",
          "default": "t:sections.rich-text.blocks.caption.settings.text.default",
          "label": "t:sections.rich-text.blocks.caption.settings.text.label"
        },
        {
          "type": "select",
          "id": "text_style",
          "options": [
            {
              "value": "subtitle",
              "label": "t:sections.rich-text.blocks.caption.settings.text_style.options__1.label"
            },
            {
              "value": "caption-with-letter-spacing",
              "label": "t:sections.rich-text.blocks.caption.settings.text_style.options__2.label"
            }
          ],
          "default": "caption-with-letter-spacing",
          "label": "t:sections.rich-text.blocks.caption.settings.text_style.label"
        },
        {
          "type": "select",
          "id": "text_size",
          "options": [
            {
              "value": "small",
              "label": "t:sections.rich-text.blocks.caption.settings.caption_size.options__1.label"
            },
            {
              "value": "medium",
              "label": "t:sections.rich-text.blocks.caption.settings.caption_size.options__2.label"
            },
            {
              "value": "large",
              "label": "t:sections.rich-text.blocks.caption.settings.caption_size.options__3.label"
            }
          ],
          "default": "medium",
          "label": "t:sections.rich-text.blocks.caption.settings.caption_size.label"
        }
      ]
    },
    {
      "type": "text",
      "name": "t:sections.rich-text.blocks.text.name",
      "limit": 3,
      "settings": [
        {
          "type": "richtext",
          "id": "text",
          "default": "t:sections.rich-text.blocks.text.settings.text.default",
          "label": "t:sections.rich-text.blocks.text.settings.text.label"
        },
        {
          "type": "checkbox",
          "id": "font_description_custom",
          "label": "Appliquer une police différente du thème",
          "default": false
        },
        {
          "type": "font_picker",
          "id": "description_font",
          "label": "Police de la description",
          "default": "poppins_n4"
        },
        {
          "type": "range",
          "id": "description_size_desktop",
          "label": "Taille de la description sur ordinateur",
          "default": 1.6,
          "min": 0.5,
          "max": 3,
          "step": 0.1,
          "unit": "rem"
        },
        {
          "type": "range",
          "id": "description_size_mobile",
          "label": "Taille de la description sur mobile",
          "default": 1.4,
          "min": 0.5,
          "max": 3,
          "step": 0.1,
          "unit": "rem"
        },
        {
          "type": "color",
          "id": "description_color",
          "label": "Couleur de la description",
          "default": "#000000"
        },
        {
          "type": "select",
          "id": "description_alignment",
          "label": "Alignement de la description",
          "default": "center",
          "options": [
            {
              "value": "left",
              "label": "Gauche"
            },
            {
              "value": "center",
              "label": "Centre"
            },
            {
              "value": "right",
              "label": "Droite"
            }
          ]
        }
      ]
    },
    {
      "type": "button",
      "name": "t:sections.rich-text.blocks.buttons.name",
      "limit": 2,
      "settings": [
        {
          "type": "url",
          "id": "button_link",
          "label": "Lien du bouton"
        },
        {
          "type": "text",
          "id": "button_label",
          "default": "t:sections.rich-text.blocks.buttons.settings.button_label_1.default",
          "label": "Texte du bouton",
          "info": "t:sections.rich-text.blocks.buttons.settings.button_label_1.info"
        },
        {
          "type": "checkbox",
          "id": "font_button_custom",
          "label": "Appliquer une police différente du thème",
          "default": false
        },
        {
          "type": "font_picker",
          "id": "button_font",
          "label": "Police du bouton",
          "default": "poppins_n4"
        },
        {
          "type": "range",
          "id": "button_text_size_desktop",
          "label": "Taille du texte sur ordinateur",
          "default": 1.6,
          "min": 0.5,
          "max": 3,
          "step": 0.1,
          "unit": "rem"
        },
        {
          "type": "range",
          "id": "button_text_size_mobile",
          "label": "Taille du texte sur mobile",
          "default": 1.4,
          "min": 0.5,
          "max": 3,
          "step": 0.1,
          "unit": "rem"
        },
        {
          "type": "color",
          "id": "button_text_color",
          "label": "Couleur du texte",
          "default": "#ffffff"
        },
        {
          "type": "color",
          "id": "button_background_color",
          "label": "Couleur de fond du bouton",
          "default": "#000000"
        },
        {
          "type": "select",
          "id": "buttons_alignment",
          "label": "Alignement des boutons",
          "default": "center",
          "options": [
            {
              "value": "left",
              "label": "Gauche"
            },
            {
              "value": "center",
              "label": "Centre"
            },
            {
              "value": "right",
              "label": "Droite"
            }
          ]
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.rich-text.presets.name",
      "blocks": [
        {
          "type": "heading"
        },
        {
          "type": "text"
        },
        {
          "type": "button"
        }
      ]
    }
  ]
}
{% endschema %}
